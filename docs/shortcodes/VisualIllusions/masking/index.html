<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Masking # Intro and background # El visual masking es un fenómeno de percepción visual que ocurre cuando la visibilidad de una imagen, llamada objetivo, es reducida por la presencia de otra imagen que se superpone, llamada máscara.
Los patrones de Moiré son patrones de interferencia que aparecen cuando dos o más patrones de líneas se superponen y no están perfectamente alineados. Este efecto se produce cuando se colocan dos rejillas con patrones de líneas finas una encima de la otra, de tal manera que las líneas de una rejilla no están perfectamente alineadas con las líneas de la otra rejilla."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Masking # Intro and background # El visual masking es un fenómeno de percepción visual que ocurre cuando la visibilidad de una imagen, llamada objetivo, es reducida por la presencia de otra imagen que se superpone, llamada máscara.
Los patrones de Moiré son patrones de interferencia que aparecen cuando dos o más patrones de líneas se superponen y no están perfectamente alineados. Este efecto se produce cuando se colocan dos rejillas con patrones de líneas finas una encima de la otra, de tal manera que las líneas de una rejilla no están perfectamente alineadas con las líneas de la otra rejilla."><meta property="og:type" content="article"><meta property="og:url" content="https://dfbello.github.io/VisualComp/docs/shortcodes/VisualIllusions/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-24T16:34:40-05:00"><title>Masking | Computación Visual</title><link rel=manifest href=/VisualComp/manifest.json><link rel=icon href=/VisualComp/favicon.png type=image/x-icon><link rel=stylesheet href=/VisualComp/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/VisualComp/flexsearch.min.js></script>
<script defer src=/VisualComp/en.search.min.65f7655cef6ac2df843f63e497fff087dfbf0d8432f92d28c196fccd7fc72e48.js integrity="sha256-ZfdlXO9qwt+EP2Pkl//wh9+/DYQy+S0owZb8zX/HLkg=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/VisualComp/><span>Computación Visual</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-5868e46333d171e79d100a0c490c26a1 class=toggle>
<label for=section-5868e46333d171e79d100a0c490c26a1 class="flex justify-between"><a href=/VisualComp/docs/shortcodes/3D/>3 D</a></label><ul><li><a href=/VisualComp/docs/shortcodes/3D/donut/>Donut</a></li></ul></li><li><input type=checkbox id=section-d200ae8d5104b797f81d670a6f628a3f class=toggle checked>
<label for=section-d200ae8d5104b797f81d670a6f628a3f class="flex justify-between"><a href=/VisualComp/docs/shortcodes/VisualIllusions/>Visual Illusions</a></label><ul><li><a href=/VisualComp/docs/shortcodes/VisualIllusions/coloring/>Coloring</a></li><li><a href=/VisualComp/docs/shortcodes/VisualIllusions/machBands/>Mach Bands</a></li><li><a href=/VisualComp/docs/shortcodes/VisualIllusions/masking/ class=active>Masking</a></li><li><a href=/VisualComp/docs/shortcodes/VisualIllusions/depthPerception/>Depth Perception</a></li></ul></li><li><input type=checkbox id=section-37d133451a87125afc7e4d4a60cdb12b class=toggle>
<label for=section-37d133451a87125afc7e4d4a60cdb12b class="flex justify-between"><a href=/VisualComp/docs/shortcodes/Shaders/>Shaders</a></label><ul><li><a href=/VisualComp/docs/shortcodes/Shaders/imageProcessing/>Image Processing</a></li><li><a href=/VisualComp/docs/shortcodes/Shaders/proceduralTexturing/>Procedural Texturing</a></li><li><a href=/VisualComp/docs/shortcodes/Shaders/photomosaic/>Photomosaic</a></li><li><a href=/VisualComp/docs/shortcodes/Shaders/spatialCoherence/>Spatial Coherence</a></li></ul></li></ul></li></ul><ul><li><a href=/VisualComp/Nosotros/>Nosotros</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/VisualComp/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control><img src=/VisualComp/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#masking>Masking</a><ul><li><a href=#intro-and-background>Intro and background</a></li><li><a href=#code-and-results>Code and results</a><ul><li><a href=#moire-patterns>Moire Patterns</a></li><li><a href=#dithering>Dithering</a></li><li><a href=#image-kernel>Image kernel</a></li></ul></li><li><a href=#conclusions-and-future-work>Conclusions and future work</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=masking>Masking
<a class=anchor href=#masking>#</a></h1><h2 id=intro-and-background>Intro and background
<a class=anchor href=#intro-and-background>#</a></h2><p>El visual masking es un fenómeno de percepción visual que ocurre cuando la visibilidad de una imagen, llamada objetivo, es reducida por la presencia de otra imagen que se superpone, llamada máscara.</p><p>Los patrones de Moiré son patrones de interferencia que aparecen cuando dos o más patrones de líneas se superponen y no están perfectamente alineados. Este efecto se produce cuando se colocan dos rejillas con patrones de líneas finas una encima de la otra, de tal manera que las líneas de una rejilla no están perfectamente alineadas con las líneas de la otra rejilla. Como resultado, se produce una interferencia entre los patrones de líneas, lo que crea un patrón de ondulación o un efecto de malla en la imagen resultante.</p><h2 id=code-and-results>Code and results
<a class=anchor href=#code-and-results>#</a></h2><h3 id=moire-patterns>Moire Patterns
<a class=anchor href=#moire-patterns>#</a></h3><p>Para estos patrones se hizo uso de varias formas en grupos en donde se supeponen entre ellas para generar una nueva forma o patrón en el interior.</p><h4 id=patrón-de-círculos>Patrón de círculos
<a class=anchor href=#patr%c3%b3n-de-c%c3%adrculos>#</a></h4><p>En este caso se van a utilizar patrones con círculos para crear efectos ondulatorios al superponer dos series de círculos con el mismo espacio entre ellos, donde uno se mueve a lo largo del canvas mientras que el otro se mantiene estático. De esta manera se genera un patrón de moire.</p><details open><summary>relevantCode</summary><div class=markdown-inner><p>function setup() {
createCanvas(400, 400);
}</p><pre><code>    function draw() {
    noFill();
    strokeWeight(ringWidth);
    for (let i = 0; i &lt; numRings; i++) {
        let radius = i * ringSpacing + ringWidth / 2;
        ellipse(width / 2, height / 2, radius * 2, radius * 2);
    }
    for (let i = 0; i &lt; numRings; i++) {
        let radius = i * ringSpacing + ringWidth / 2;
        ellipse(xVar, height / 2, radius * 2, radius * 2);
    }
    }
</code></pre></div></details><p>En este caso es posible modificar la velocidad a la que se mueve el segundo grupo de circulos dentro del canvas.</p><iframe id=moirePattern1 style=width:425px;height:425px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/moirePattern1.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code</summary><div class=markdown-inner><p>let xVar = 200
let numRings = 40; // number of rings
let ringSpacing = 5; // spacing between rings
let ringWidth = 2; // width of each ring
let ringColor = [255, 0, 0]; // color of rings
let speedSlider;
let speed = 0.5;
let direction = true;</p><pre><code>    function setup() {
    createCanvas(400, 400);
    speedSlider = createSlider(0, 10, 5, 1);
    speedSlider.position(10,10);
    speedSlider.style(&quot;width&quot;, &quot;80px&quot;);
    }

    function draw() {
    background(255);

    // draw rings
    noFill();
    strokeWeight(ringWidth);
    //stroke(ringColor);
    for (let i = 0; i &lt; numRings; i++) {
        let radius = i * ringSpacing + ringWidth / 2;
        ellipse(width / 2, height / 2, radius * 2, radius * 2);
    }
    for (let i = 0; i &lt; numRings; i++) {
        let radius = i * ringSpacing + ringWidth / 2;
        ellipse(xVar, height / 2, radius * 2, radius * 2);
    }
    maxRadius = numRings*ringSpacing + ringWidth / 2;
    if (direction){
        xVar += speedSlider.value()/10;
    }
    else {
        xVar -= speedSlider.value()/10;
    }
    if (xVar + maxRadius &gt; width + 50){
        direction = false
    }
    else if (xVar - maxRadius &lt; -50){
        direction = true
    }
    }
</code></pre></div></details><h4 id=patrón-de-lineas-paralelas>Patrón de lineas paralelas
<a class=anchor href=#patr%c3%b3n-de-lineas-paralelas>#</a></h4><p>Dentro del siguiente código se tienen dos grupos de lineas paralelas, unas están fijas mientras que las otras van rotando desde el centro. Esto genera un efecto que crea la ilusión de generación de rombos de diferentes tamaños dependiendo del ángulo de giro del segundo grupo de lineas.</p><details open><summary>relevantCode</summary><div class=markdown-inner><p>function setup() {
createCanvas(500, 500);
}</p><pre><code>    function draw() {
        background(255);
        for (let y = 0; y &lt; height; y += 10) {
            line(0, y, width, y);
        }
        push();
        translate(width/2, height/2);
        rotate(angle);
        for (let y = -height; y &lt; height; y += 10) {
            line(-width/2, y, width/2, y);
        }
        pop();
    }
</code></pre></div></details><iframe id=moirePattern3 style=width:525px;height:525px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/moirePattern3.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code</summary><div class=markdown-inner><p>let angle = 0;
function setup() {
createCanvas(500, 500);
angleMode(DEGREES);
strokeWeight(3);
}</p><pre><code>    function draw() {

    }
</code></pre></div></details><h4 id=patrón-de-líneas-espaciadas>Patrón de líneas espaciadas
<a class=anchor href=#patr%c3%b3n-de-l%c3%adneas-espaciadas>#</a></h4><iframe id=moirePattern4 style=width:600px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/moirePattern4.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code</summary><div class=markdown-inner><pre><code>let gridSpacing;
let slider;


function setup() {
    createCanvas(575,575);
    slider = createSlider(1,30,6,1);
    slider.position(10,10);
    stroke(255,255,255);
}

function draw() {
    background(0,0,0);
    gridSpacing = slider.value();
    for(i = 0; i&lt;width; i ++){
        line(gridSpacing * i, 0, 0, height);
    }
}
</code></pre></div></details><h4 id=kinegrama>Kinegrama
<a class=anchor href=#kinegrama>#</a></h4><p>El siguiente kinegrama se genera a partir de una imágen preestablecida que se muestra dentro del mismo programa al hacer clic en el canvas de la misma. Sobre esta imagen, a forma de mascara, se coloca una capa de líneas que van de arriba a abajo y que revelan el contenido de la imagen de debajo, que sería el objetivo</p><details open><summary>relevantCode</summary><div class=markdown-inner><pre><code>    function preload() {
            img = loadImage(&quot;/VisualComp/sketches/assets/kinegram.png&quot;);
    }
    function setup() {
            createCanvas(400, 420);
    }
    function draw() {
            image(img,0,0);
            for(let i = -height/rectLen; i &lt; 0; i+=spacing){
            fill(&quot;black&quot;);
            rect(0,i\*rectLen+y,width,rectLen);
            }
            y += rectSpeed;
            if ((-height+y) &gt;= height) {
            y = 0;
            }
    }
</code></pre></div></details><p>Esta imagen está hecha aparte y no se calcula dentro del programa, sin embargo es posible realizar un programa que calcule la imagen objetivo a partir de un gif o una serie de imagenes que se quieran visualizar de esta manera.</p><iframe id=kinegram style=width:425px;height:445px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/kinegram.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code</summary><div class=markdown-inner><pre><code>    let img;
    let rectSpeed = 0.5;
    let rectLen = 10;
    let spacing = 1.2;
    let y = 0;

            function preload() {
                img = loadImage(&quot;/VisualComp/sketches/assets/kinegram.png&quot;);
            }

            function setup() {
                createCanvas(400, 420);
            }

            function draw() {
                background(255);
                image(img,0,0);
                for(let i = -height/rectLen; i &lt; 0; i+=spacing){
                    fill(&quot;black&quot;);
                    rect(0,i*rectLen+y,width,rectLen);
                }
                y += rectSpeed;
                if ((-height+y) &gt;= height) {
                    y = 0;
                }
                if(mouseIsPressed){
                    background(255);
                    image(img,0,0);
                }
            }
</code></pre></div></details><h3 id=dithering>Dithering
<a class=anchor href=#dithering>#</a></h3><p>El dithering es una forma intencional de aplicar ruido, usada para aleatorizar el error de cuantificación y de esta manera evitar patrones a gran escala como color banding en las imágenes. Dither es utilizado en diferentes campos donde ocurre procesamiento y análisis de señales digitales.</p><p>En el procesamiento de imágenes digitales es usado para generar profundidad de color en situaciones donde la paleta de colores es limitada. Los colores no existentes en la paleta se aproximan por una difusión de píxeles dentro de la gama de colores disponibles. El siguiente ejemplo muestra como se produce un amarillo a partir de rojo y verde. Use el slider parra hacer la rejilla mas pequeña, donde se empieza a apreciar el efecto.</p><iframe id=dithering style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/dithering.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code</summary><div class=markdown-inner><pre><code>let gridSlider;
let maxSize = 250;


function setup() {
    createCanvas(600, 600);
    gridSlider = createSlider(2,maxSize,2,5);
    gridSlider.position(10,10);
}


function draw() {
    background(0);
    gridSize = gridSlider.value();
    grid(gridSize, [255,0,0], [0,255,0]);
}

function grid(Size, colorA, colorB){

    w = width/Size;
    h = height/Size;

    noStroke();
    for(i = 0 ; i &lt; Size; i++){
        if (i % 2 == 0){
            c = 0;
        }else{
            c = 1;
        }

        for(j = 0; j &lt; Size; j++){

            if(j % 2 == c){
                fill(colorA);
            }else{
                fill(colorB);
            }

            rect(w * i, j * h, w, h);
        }
    }
}
</code></pre></div></details><h3 id=image-kernel>Image kernel
<a class=anchor href=#image-kernel>#</a></h3><p>En este caso se tiene un procesador de imágenes que soporta diferentes kernels de imágenes con su respectivo histograma y su cambio de brillo.
En este caso se puede subir cualquier imagen que se desee modificar y se mostrará esta imagen original al lado de la imagen modificada con los kernels que se escojan, además que el histograma se muestra siempre con la imagen modificada.
Se debe tener en cuenta que este histograma representa la cantidad de pixeles que tienen un mismo valor tonal, es decir la oscuridad o brillo, dentro de la imagen; es por esto que se genera un total de 256 líneas.</p><p>Cada uno de los diferentes kernels se pude escoger con el desplegable que se encuentra a la izquierda, mientras que se necesitan presionar las teclas &ldquo;+&rdquo; o &ldquo;-&rdquo; para cambiar el brillo de la imagen en cuestión.</p><iframe id=kernelImages style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/VisualComp/sketches/kernelImages.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=conclusions-and-future-work>Conclusions and future work
<a class=anchor href=#conclusions-and-future-work>#</a></h2><p>A partir del anterior trabajo se puede concluir que</p><ul><li><p>Los patrones de moire y los kinegramas son formas muy sencillas de hace ilusiones visuales al utilizar dos elementos en el que uno cubre al otro para general nuevas figuras a partir de lo que se quiere mostrar</p></li><li><p>Se pueden formar infinidad de patrones de moire con muchas figuras de diferentes formas y tamaños, sin embargo dentro de la más estudiadas se encuentran las formas más básicas como círculos o lineas</p></li><li><p>Un kinegrama tiene grandes aplicaciones en la realización de movimientos a partir de una imagen base, la cual puede ser calculada a partir de alguna serie de imagenes existentes.</p></li><li><p>El procesamiento de imagenes kernel es util cuando se requiere hacer un calculo más específico de algunas características que pueda tener la imagen en cuestión.</p></li></ul><p>Como trabajo futuro se espera poder implementar más patrones de moire mucho más complejos y que creen fiiguras más interesantes para el ojo humano. Además de generar la imágen objetivo de un kinegrama a partir de un gif o de varias imagenes en secuencia.</br>Por último se espera que dentro de los kernel de imagenes se pueda aplicar el mismo modelo a un video en tiempo real.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Referencias</span>
<span>...</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><h2 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Visual_masking>https://en.wikipedia.org/wiki/Visual_masking</a></li><li><a href=https://www.sciencedirect.com/topics/medicine-and-dentistry/visual-masking>https://www.sciencedirect.com/topics/medicine-and-dentistry/visual-masking</a></li><li><a href=https://www.britannica.com/science/moire-pattern>https://www.britannica.com/science/moire-pattern</a></li><li><a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>https://en.wikipedia.org/wiki/Kernel_(image_processing)</a></li><li><a href=https://setosa.io/ev/image-kernels/>https://setosa.io/ev/image-kernels/</a></li><li><a href=https://en.wikipedia.org/wiki/Dither>https://en.wikipedia.org/wiki/Dither</a></li></ul></div></label></div><a href=/VisualComp/ class=book-btn>Get Home</a></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/dfbello/VisualComp/commit/8807979a4f9c453f2df29ad48d29e5c60bf89654 title='Last modified by Diego Bello | June 24, 2023' target=_blank rel=noopener><img src=/VisualComp/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 24, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#masking>Masking</a><ul><li><a href=#intro-and-background>Intro and background</a></li><li><a href=#code-and-results>Code and results</a><ul><li><a href=#moire-patterns>Moire Patterns</a></li><li><a href=#dithering>Dithering</a></li><li><a href=#image-kernel>Image kernel</a></li></ul></li><li><a href=#conclusions-and-future-work>Conclusions and future work</a></li></ul></li></ul></nav></div></aside></main></body></html>