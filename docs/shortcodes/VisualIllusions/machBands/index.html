<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Mach bands # Intro and background # Para el desarrollo de esta generación de terreno se hizo necesario el uso de perlin noise, el cual es un algoritmo de generación de ruido que se utiliza para generar patrones de ruido suave y orgánico que parecen naturales y aleatorios, pero que en realidad están controlados por una función matemática. Este ruido esta función matemática utiliza interpolación entre un gran número de gradientes precalculados de vectores que construyen un valor que varía seudo-aleatoriamente en el espacio o tiempo."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Mach bands # Intro and background # Para el desarrollo de esta generación de terreno se hizo necesario el uso de perlin noise, el cual es un algoritmo de generación de ruido que se utiliza para generar patrones de ruido suave y orgánico que parecen naturales y aleatorios, pero que en realidad están controlados por una función matemática. Este ruido esta función matemática utiliza interpolación entre un gran número de gradientes precalculados de vectores que construyen un valor que varía seudo-aleatoriamente en el espacio o tiempo."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcgroup.github.io/showcase/docs/shortcodes/VisualIllusions/machBands/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-30T16:23:37-05:00"><title>Mach Bands | Computación Visual</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.a82d7e77ceb134d151c4d7e381eeb30623fbd5a524d58c584d8716ecec0205bd.css integrity="sha256-qC1+d86xNNFRxNfjge6zBiP71aUk1YxYTYcW7OwCBb0=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Computación Visual</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-5868e46333d171e79d100a0c490c26a1 class=toggle>
<label for=section-5868e46333d171e79d100a0c490c26a1 class="flex justify-between"><a href=/showcase/docs/shortcodes/3D/>3 D</a></label><ul><li><a href=/showcase/docs/shortcodes/3D/donut/>Donut</a></li></ul></li><li><input type=checkbox id=section-d200ae8d5104b797f81d670a6f628a3f class=toggle checked>
<label for=section-d200ae8d5104b797f81d670a6f628a3f class="flex justify-between"><a href=/showcase/docs/shortcodes/VisualIllusions/>Visual Illusions</a></label><ul><li><a href=/showcase/docs/shortcodes/VisualIllusions/coloring/>Coloring</a></li><li><a href=/showcase/docs/shortcodes/VisualIllusions/machBands/ class=active>Mach Bands</a></li><li><a href=/showcase/docs/shortcodes/VisualIllusions/masking/>Masking</a></li><li><a href=/showcase/docs/shortcodes/VisualIllusions/depthPerception/>Depth Perception</a></li></ul></li><li><input type=checkbox id=section-37d133451a87125afc7e4d4a60cdb12b class=toggle>
<label for=section-37d133451a87125afc7e4d4a60cdb12b class="flex justify-between"><a href=/showcase/docs/shortcodes/Shaders/>Shaders</a></label><ul><li><a href=/showcase/docs/shortcodes/Shaders/coloring/>Coloring</a></li><li><a href=/showcase/docs/shortcodes/Shaders/texturing/>Texturing</a></li><li><a href=/showcase/docs/shortcodes/Shaders/imageProcessing/>Image Processing</a></li><li><a href=/showcase/docs/shortcodes/Shaders/proceduralTexturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/shortcodes/Shaders/photomosaic/>Photomosaic</a></li><li><a href=/showcase/docs/shortcodes/Shaders/spatialCoherence/>Spatial Coherence</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/Nosotros/>Nosotros</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Mach Bands</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#mach-bands>Mach bands</a><ul><li><a href=#intro-and-background>Intro and background</a></li><li><a href=#code-and-results>Code and results</a><ul><li><a href=#generación-de-terreno-con-perlin-noise>Generación de terreno con Perlin Noise</a></li></ul></li><li><a href=#conclusions-and-future-work>Conclusions and future work</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=mach-bands>Mach bands
<a class=anchor href=#mach-bands>#</a></h1><h2 id=intro-and-background>Intro and background
<a class=anchor href=#intro-and-background>#</a></h2><p>Para el desarrollo de esta generación de terreno se hizo necesario el uso de perlin noise, el cual es un algoritmo de generación de ruido que se utiliza para generar patrones de ruido suave y orgánico que parecen naturales y aleatorios, pero que en realidad están controlados por una función matemática. Este ruido esta función matemática utiliza interpolación entre un gran número de gradientes precalculados de vectores que construyen un valor que varía seudo-aleatoriamente en el espacio o tiempo.</p><p>La idea detrás del Perlin noise es crear un patrón de valores de ruido que varíen suavemente a través de una matriz de puntos, lo que produce un efecto de movimiento y textura natural.</br>Es frecuentemente utilizado en imágenes generadas por computadora para simular variabilidad en todo tipo de fenómenos, acercándose estas así a un aspecto más natural, sobre todo en efectos de computadora como el fuego, humo, nubes y en general todo tipo de fenómenos que requieran aleatoriedad sin perder continuidad.</p><p align=center><img src=https://upload.wikimedia.org/wikipedia/commons/8/8b/PerlinNoise2d.png></p><h2 id=code-and-results>Code and results
<a class=anchor href=#code-and-results>#</a></h2><p>A la hora de utilizar este ruido para la generación de terreno se hizo necesario el uso de la función perlin() de la librería p5.js, la cual recibe unas ciertas coordenas y retorna el valor de perlin de estas.</p><h3 id=generación-de-terreno-con-perlin-noise>Generación de terreno con Perlin Noise
<a class=anchor href=#generaci%c3%b3n-de-terreno-con-perlin-noise>#</a></h3><details open><summary>RelevantCode</summary><div class=markdown-inner><pre><code>    function setup() {
        createCanvas(600, 600, WEBGL);
        terrain = new Array(cols).fill(0).map(() =&gt; new Array(rows).fill(0));
    }

    function draw() {
        flying -= flyingSlider.value();
        let yoff = flying;
        for (let y = 0; y &lt; rows; y++) {
            let xoff = 0;
            for (let x = 0; x &lt; cols; x++) {
                terrain[x][y] = map(noise(xoff, yoff), 0, 1, -maxSlider.value(), maxSlider.value());
                xoff += 0.1;
            }
            yoff += 0.1;
        }
        background(56,124,149);
        for (let y = 0; y &lt; rows - 1; y++) {
            beginShape(TRIANGLE_STRIP);
            for (let x = 0; x &lt; cols; x++) {
                vertex(x * sclSlider.value(), y * sclSlider.value(), terrain[x][y]);
                vertex(x * sclSlider.value(), (y + 1) * sclSlider.value(), terrain[x][y + 1]);
            }
            endShape();
        }
    }
</code></pre></div></details><p>Para la creación de este programa se hizo uso de formas triangulares a los que se se les asignó como coordenas unos valores en X y Y fijos dentro de la grilla y en Z el valor obtenido con el perlin noise para cada coordenada. En este caso se permite generar un terreno que parece realista y no se ven cambios bruscos que tendría en caso de ser completamente aleatorio.</p><p>Por otro lado se generó una ilusión de movimiento al mover estar figuras en el eje X conservando sus coordenadas en Y y Z para que sea consistente con lo que se espera.</p><p>Por último, se tiene que para darle color se escogió una paleta de colores verdes que representan las montañas y que se encuentran en un rango que se mapea dentro de la generación de terreno dependiendo de la altura a la que se encuentra cada figura.</p><p>Dentro de este programa es posible modificar la velocidad de movimiento, la altura máxima de las montañas y la escala de tamaño de las figuras. Además de poder mostrar o no las figuras con la que se genera el terreno.</p><details><summary>Code</summary><div class=markdown-inner><pre><code>    let cols, rows;
    let h = 2000;
    let w = 1700;
    let flying = 0;
    let maxSlider;
    let flyingSlider;
    let sclSlider;
    let strokeCheckbox;
    function setup() {
        maxSlider = createSlider(50, 250, 150);
        maxSlider.position(10, 10);
        maxSlider.style(&quot;width&quot;, &quot;80px&quot;);
        flyingSlider = createSlider(0, 0.5, 0.1, 0.05);
        flyingSlider.position(10, 30);
        flyingSlider.style(&quot;width&quot;, &quot;80px&quot;);
        sclSlider = createSlider(20, 50, 20);
        sclSlider.position(120, 10);
        sclSlider.style(&quot;width&quot;, &quot;80px&quot;);
        strokeCheckbox = createCheckbox(&quot;Stroke&quot;, false);
        strokeCheckbox.position(120, 30);
        strokeCheckbox.changed(getStroke);
        createCanvas(600, 600, WEBGL);
        noStroke();
        cols = w / sclSlider.value();
        rows = h / sclSlider.value();
        terrain = new Array(cols).fill(0).map(() =&gt; new Array(rows).fill(0));
    }
    function draw() {
        flying -= flyingSlider.value();
        let yoff = flying;
        for (let y = 0; y &lt; rows; y++) {
            let xoff = 0;
            for (let x = 0; x &lt; cols; x++) {
                terrain[x][y] = map(noise(xoff, yoff), 0, 1, -maxSlider.value(), maxSlider.value());
                xoff += 0.1;
            }
            yoff += 0.1;
        }
        background(56,124,149);
        rotateX(PI / 3);
        translate(-w / 2, -h / 2);
        for (let y = 0; y &lt; rows - 1; y++) {
            beginShape(TRIANGLE_STRIP);
            for (let x = 0; x &lt; cols; x++) {
                fill(map(terrain[x][y], -maxSlider.value(), maxSlider.value(), 20, 55), map(terrain[x][y], -maxSlider.value(), maxSlider.value(), 65, 190), map(terrain[x][y], -maxSlider.value(), maxSlider.value(), 20, 60));
                vertex(x * sclSlider.value(), y * sclSlider.value(), terrain[x][y]);
                vertex(x * sclSlider.value(), (y + 1) * sclSlider.value(), terrain[x][y + 1]);
            }
            endShape();
        }
    }
    function getStroke() {
        if (strokeCheckbox.checked()){
            stroke(0);
        }
        else {
            noStroke();
        }
    }
</code></pre></div></details><iframe id=terrainGenerator style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/terrainGenerator.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>La ilusión de realismo dentro de este terreno se debe principalmente al perlin noise, sin embargo también es importante destacar que la ubicación de la cámara y el tamaño de la grilla son temas que no se deben dejar de lado a la hora de hacer esta generación, debido a que puede quedarse muy corto o dar la percepción de que las montañas se generan de la nada.</p><h2 id=conclusions-and-future-work>Conclusions and future work
<a class=anchor href=#conclusions-and-future-work>#</a></h2><p>Se puede concluir de este trabajo que</p><ul><li><p>El perlin noise se utiliza comúnmente en la computación gráfica y el diseño de videojuegos para crear efectos visuales realistas, como terrenos montañosos, nubes, agua y texturas orgánicas.</p></li><li><p>A la hora de darle color a una generación de terreno como esta, es necesario aplicar métodos para suavizar los cambios de color entre figuras, ya que sin este cambio se nota el cambio de colorentre figura y figura muy claramente.</p></li><li><p>En caso de querer aumentar a su máximo nivel algunas variables como la velocidad o la altura máxima que puede tener el terreno, la generación puede dejar de verse fluida debido a la cantidad de elementos que debe calcular y la rapidez a la que lo debe hacer.</p></li></ul><p>Como trabajo futuro se espera poder mejorar el coloreado del terreno, de manera que se vea mucho más suave y natural; además de agregarle más opciones de visualización como lo puede ser cambiar la orientación de la cámara y que el avance del terreno sea acorde a este movimiento o que se pueda bajar o subir la vista sobre el mismo.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Referencias</span>
<span>...</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><h2 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Perlin_noise>https://en.wikipedia.org/wiki/Perlin_noise</a></li><li><a href="https://www.youtube.com/watch?v=IKB1hWWedMk">https://www.youtube.com/watch?v=IKB1hWWedMk</a></li></ul></div></label></div><a href=/showcase/ class=book-btn>Get Home</a></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/VisualCGroup/showcase/commit/44d7f264d2d73cbf3b7a7232bf81017cd6a16fed title='Last modified by dzambranob | March 30, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 30, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#mach-bands>Mach bands</a><ul><li><a href=#intro-and-background>Intro and background</a></li><li><a href=#code-and-results>Code and results</a><ul><li><a href=#generación-de-terreno-con-perlin-noise>Generación de terreno con Perlin Noise</a></li></ul></li><li><a href=#conclusions-and-future-work>Conclusions and future work</a></li></ul></li></ul></nav></div></aside></main></body></html>